<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>
      SMART on FHIR -- Tutorials -- JavaScript
    </title>

    <!-- Bootstrap core CSS -->
    <link href="/assets/css/bootstrap-cosmo.css" rel="stylesheet">

    <!-- Documentation extras -->
    <link href="/assets/css/smart-on-fhir-docs.css" rel="stylesheet">
	
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">

  </head>
  <body data-spy="scroll" data-target=".page-navbar">

    <!-- Docs master nav -->
    <header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
    <div class="container">
      <div class="navbar-header">
        <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/" class="navbar-brand">SMART on FHIR (AU)</a>
      </div>

      <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">

      <ul class="nav navbar-nav">
        <li class="dropdown">
        <a href="/sandbox" class="dropdown-toggle" data-toggle="dropdown">Sandbox<b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="/sandbox">Overview</a></li>
          <li><a href="/sandbox/account">Account Setup</a></li>
          <li><a href="/sandbox/register">Register Your App</a></li>
          <li><a href="/tutorials/testing">Test Your App</a></li>
          <li><a href="/sandbox/install">Build Your Own Sandbox</a></li>
        </ul>
        </li>
        <li class="dropdown">
        <a href="/sandbox" class="dropdown-toggle" data-toggle="dropdown">Client libraries<b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="/clients/javascript">JavaScript</a></li>
          <li><a href="/clients/python">Python</a></li>
          <li><a href="/Swift-SMART/">iOS</a></li>
          <li><a href="/clients/others">Other Frameworks</a></li>
        </ul>
        </li>
        <li class="dropdown">
        <a href="/authorization" class="dropdown-toggle" data-toggle="dropdown">Authorization<b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="/authorization">SMART App Authorization Guide</a></li>
          <li><a href="/authorization/scopes-and-launch-context">Scopes and launch context</a></li>
          <li><a href="/authorization/best-practices">Best practices for EHRs</a></li>
          <li><a href="/authorization/backend-services">Backend services (draft)</a></li>
        </ul>
        </li>
        <li class="dropdown">
			<a href="/profiles" class="dropdown-toggle" data-toggle="dropdown">Data<b class="caret"></b></a>
			<ul class="dropdown-menu">
				<li><a href="/profiles">Overview</a></li>
				<li style="padding-left:10px"><a href="/profiles/profile-ihi">IHI</a></li>
				<li style="padding-left:10px"><a href="/profiles/profile-medicare">Medicare Number</a></li>
				<li style="padding-left:10px"><a href="/profiles/extension-indigenous-status">Indigenous Status</a></li>
				<li><a href="/profiles/coding">Coding</a></li>
			</ul>
        </li>
        <li class="dropdown">
        <a href="/tutorials" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
        <ul class="dropdown-menu">
           <li><a href="/tutorials">Overview</a></li>
           <li><a href="/tutorials/javascript">Building a JavaScript app</a></li>
           <li><a href="/tutorials/rest">Building a REST app</a></li>
           <li><a href="/tutorials/testing">Testing your app from localhost</a></li>
           <li><a href="/tutorials/authorization">Simple Authorization App</a></li>
           <li><a href="/tutorials/server-quick-start">Building a server: quick-start guide</a></li>
        </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://groups.google.com/forum/#!forum/smart-on-fhir">Google Group</a></li>
        <li><a href="https://github.com/smart-on-fhir">GitHub</a></li>
      </ul>
      </nav>
    </div>
    </header>


    <!-- Docs page layout -->
    <div id="master">
      <div class="container bs-docs-container">

        <div class="row">
          <div class="col-md-9 page-content" role="main">
            <h1>Tutorial - Building a JavaScript App</h1>

<h2>Getting started</h2>

<p>The SMART on FHIR JavaScript client library helps you build browser-based SMART
apps that interact with a FHIR REST API server. It can help your app get
authorization tokens, provide information about the user and patient record in
context, and issue API calls to fetch clinical data.</p>

<p>To get started with the SMART on FHIR JavaScript client library, you&#39;ll need to:</p>

<h3>1. Include a <code>script</code> tag</h3>

<p>Include a <code>script</code> tag referencing the library. The latest code is always
available <em>for download</em> (not live hosting) in GitHub at
<a href="https://raw.githubusercontent.com/smart-on-fhir/client-js/master/dist/fhir-client.js">https://raw.githubusercontent.com/smart-on-fhir/client-js/master/dist/fhir-client.js</a>.</p>

<p>You&#39;ll want to download and host this file alongside your app. Unless you&#39;re
just prototyping -- in which case you can use this <a href="https://rawgithub.com/smart-on-fhir/client-js/master/dist/fhir-client.js">rawgithub
link</a>
in your script tag&#39;s <code>src</code>. (Be sure never to use &quot;rawgithub&quot; in a deployment scenario, though!)</p>

<p>Including this script will create a global <code>FHIR</code> object for you to work with.</p>

<h3>2. Create or obtain an instance of <code>FHIR.client</code></h3>

<p>In a typical workflow, you won&#39;t instantiate this object yourself -- it will
be created by <code>FHIR.oauth2.launch()</code>. But when you&#39;re prototyping, you can just
create your own. By convention, we call this instance <code>smart</code>. So you can
create a client via:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">var smart = FHIR.client({
  serviceUrl: &#39;https://fhir-open-api.smarthealthit.org&#39;,
  patientId: &#39;1137192&#39;
});
</code></pre></div>
<p>This object will be your touchpoint for making FHIR API calls. Your client
will have some context built in, including:</p>

<ul>
<li><code>smart.patient</code></li>
<li><code>smart.user</code></li>
</ul>

<h3>3. Use your client instance to execute FHIR API calls</h3>

<p>You can make calls like:</p>

<ul>
<li><code>read</code>: fetch a single resource, given its id</li>
<li><code>search</code>: search for resources that match a set of criteria</li>
</ul>

<p>In general, you can make API calls that are scoped to the current patient by
using <code>smart.patient</code>, as follows:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">// Search for the current patient&#39;s conditions
smart.patient.api.search({type: &#39;Condition&#39;});

// Search for the current patient&#39;s prescriptions
smart.patient.api.search({type: &#39;MedicationOrder&#39;});
</code></pre></div>
<p>If you&#39;re writing a population-level app, you can query across patient records
by using <code>smart.api</code>, as follows:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">// Search for conditions added today
var todaysDiagnoses = smart.patient.api.search({type: &#39;Condition&#39;, query: {dateRecorded: &#39;2014-05-01&#39;}});

// Search for all statins prescribed today
var statinRxs = smart.patient.api.search({type: &#39;MedicationOrder&#39;, query: {dateWritten: &#39;2014-05-01&#39;, name: &#39;statin&#39;}});
</code></pre></div>
<p>These functions return <code>$.Deferred</code> objects, which you can work with simply by
calling their <code>done</code> method:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">statinRxs.done(function(prescriptions){
  console.log(prescriptions);
});
</code></pre></div>
<p>In the <code>done</code> callback, you&#39;ll get a data structure containing search results.</p>

<p>Here&#39;s a complete example of the steps above:</p>

<p>See the source, or click &quot;preview&quot; to see the app in action!</p>

<p><iframe
  style="border: 1px solid black"
  src="http://embed.plnkr.co/P2aADc9S4e9jtgplsqQn/get-data.js"
  width="100%" height="500px"></iframe></p>

<iframe 
    style="border: 1px solid black"
    width="100%" height="500px"
    src="//jsfiddle.net/rc9jygga/embedded/"></iframe>

<p>For more details, see our <a href="../../clients/javascript">JS client docs</a></p>

          </div>


          <div class="col-md-3 page-content" role="main">
            <div class="alert alert-info">
             The SMART on FHIR API is evolving in parallel with the <a class="alert-link"
               href="http://hl7.org/fhir/timelines.html">FHIR ballot releases</a>.
             If you spot problems,
             please <a class="alert-link"
               href="https://github.com/smart-on-fhir/smart-on-fhir.github.io/issues">file
               an issue</a>. 
             
             Or better yet, you can <a class="alert-link edit-in-github" 
               href="">edit
               this page</a>.

            </div> 
          </div>

        </div>
      </div>
    </div>
    <script>
      window.github_branch = "fhir-au";
    </script>
    <script src="/assets/js/jquery-2.1.0.js"></script>
    <script src="/assets/js/bootstrap3.min.js"></script>
    <script src="/assets/js/site.js"></script>
    <footer class="text-center">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            Version: <a href="/releases/">fhir-au</a> - <a href="http://smarthealthit.org">SMART Health IT 2015</a>
          </div>
        </div>
      </div>
    </footer>
    
  </body>
</html>
